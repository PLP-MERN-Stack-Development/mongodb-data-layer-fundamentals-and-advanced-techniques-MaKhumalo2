_id,//,insert_books.js,-,Script,to,populate,MongoDB,with,sample,book,data
68ea4037c29b425043ca8526,,,,,,,,,,,
68ea4037c29b425043ca8527,//,Import,MongoDB,client,,,,,,,
68ea4037c29b425043ca8528,const,{,MongoClient,},=,require('mongodb');,,,,,
68ea4037c29b425043ca8529,,,,,,,,,,,
68ea4037c29b425043ca852a,//,Connection,URI,(replace,with,your,MongoDB,connection,string,if,using
68ea4037c29b425043ca852b,const,uri,=,'mongodb://localhost:27017';,,,,,,,
68ea4037c29b425043ca852c,,,,,,,,,,,
68ea4037c29b425043ca852d,//,Database,and,collection,names,,,,,,
68ea4037c29b425043ca852e,const,dbName,=,'plp_bookstore';,,,,,,,
68ea4037c29b425043ca852f,const,collectionName,=,'books';,,,,,,,
68ea4037c29b425043ca8530,,,,,,,,,,,
68ea4037c29b425043ca8531,//,Sample,book,data,,,,,,,
68ea4037c29b425043ca8532,const,books,=,[,,,,,,,
68ea4037c29b425043ca8533,,,{,,,,,,,,
68ea4037c29b425043ca8534,,,,,title:,'To,Kill,a,"Mockingbird',",,
68ea4037c29b425043ca8535,,,,,author:,'Harper,"Lee',",,,,
68ea4037c29b425043ca8536,,,,,genre:,"'Fiction',",,,,,
68ea4037c29b425043ca8537,,,,,published_year:,"1960,",,,,,
68ea4037c29b425043ca8538,,,,,price:,"12.99,",,,,,
68ea4037c29b425043ca8539,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca853a,,,,,pages:,"336,",,,,,
68ea4037c29b425043ca853b,,,,,publisher:,'J.,B.,Lippincott,&,Co.',
68ea4037c29b425043ca853c,,,"},",,,,,,,,
68ea4037c29b425043ca853d,,,{,,,,,,,,
68ea4037c29b425043ca853e,,,,,title:,"'1984',",,,,,
68ea4037c29b425043ca853f,,,,,author:,'George,"Orwell',",,,,
68ea4037c29b425043ca8540,,,,,genre:,"'Dystopian',",,,,,
68ea4037c29b425043ca8541,,,,,published_year:,"1949,",,,,,
68ea4037c29b425043ca8542,,,,,price:,"10.99,",,,,,
68ea4037c29b425043ca8543,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca8544,,,,,pages:,"328,",,,,,
68ea4037c29b425043ca8545,,,,,publisher:,'Secker,&,Warburg',,,
68ea4037c29b425043ca8546,,,"},",,,,,,,,
68ea4037c29b425043ca8547,,,{,,,,,,,,
68ea4037c29b425043ca8548,,,,,title:,'The,Great,"Gatsby',",,,
68ea4037c29b425043ca8549,,,,,author:,'F.,Scott,"Fitzgerald',",,,
68ea4037c29b425043ca854a,,,,,genre:,"'Fiction',",,,,,
68ea4037c29b425043ca854b,,,,,published_year:,"1925,",,,,,
68ea4037c29b425043ca854c,,,,,price:,"9.99,",,,,,
68ea4037c29b425043ca854d,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca854e,,,,,pages:,"180,",,,,,
68ea4037c29b425043ca854f,,,,,publisher:,'Charles,Scribner\'s,Sons',,,
68ea4037c29b425043ca8550,,,"},",,,,,,,,
68ea4037c29b425043ca8551,,,{,,,,,,,,
68ea4037c29b425043ca8552,,,,,title:,'Brave,New,"World',",,,
68ea4037c29b425043ca8553,,,,,author:,'Aldous,"Huxley',",,,,
68ea4037c29b425043ca8554,,,,,genre:,"'Dystopian',",,,,,
68ea4037c29b425043ca8555,,,,,published_year:,"1932,",,,,,
68ea4037c29b425043ca8556,,,,,price:,"11.50,",,,,,
68ea4037c29b425043ca8557,,,,,in_stock:,"false,",,,,,
68ea4037c29b425043ca8558,,,,,pages:,"311,",,,,,
68ea4037c29b425043ca8559,,,,,publisher:,'Chatto,&,Windus',,,
68ea4037c29b425043ca855a,,,"},",,,,,,,,
68ea4037c29b425043ca855b,,,{,,,,,,,,
68ea4037c29b425043ca855c,,,,,title:,'The,"Hobbit',",,,,
68ea4037c29b425043ca855d,,,,,author:,'J.R.R.,"Tolkien',",,,,
68ea4037c29b425043ca855e,,,,,genre:,"'Fantasy',",,,,,
68ea4037c29b425043ca855f,,,,,published_year:,"1937,",,,,,
68ea4037c29b425043ca8560,,,,,price:,"14.99,",,,,,
68ea4037c29b425043ca8561,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca8562,,,,,pages:,"310,",,,,,
68ea4037c29b425043ca8563,,,,,publisher:,'George,Allen,&,Unwin',,
68ea4037c29b425043ca8564,,,"},",,,,,,,,
68ea4037c29b425043ca8565,,,{,,,,,,,,
68ea4037c29b425043ca8566,,,,,title:,'The,Catcher,in,the,"Rye',",
68ea4037c29b425043ca8567,,,,,author:,'J.D.,"Salinger',",,,,
68ea4037c29b425043ca8568,,,,,genre:,"'Fiction',",,,,,
68ea4037c29b425043ca8569,,,,,published_year:,"1951,",,,,,
68ea4037c29b425043ca856a,,,,,price:,"8.99,",,,,,
68ea4037c29b425043ca856b,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca856c,,,,,pages:,"224,",,,,,
68ea4037c29b425043ca856d,,,,,publisher:,"'Little,",Brown,and,Company',,
68ea4037c29b425043ca856e,,,"},",,,,,,,,
68ea4037c29b425043ca856f,,,{,,,,,,,,
68ea4037c29b425043ca8570,,,,,title:,'Pride,and,"Prejudice',",,,
68ea4037c29b425043ca8571,,,,,author:,'Jane,"Austen',",,,,
68ea4037c29b425043ca8572,,,,,genre:,"'Romance',",,,,,
68ea4037c29b425043ca8573,,,,,published_year:,"1813,",,,,,
68ea4037c29b425043ca8574,,,,,price:,"7.99,",,,,,
68ea4037c29b425043ca8575,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca8576,,,,,pages:,"432,",,,,,
68ea4037c29b425043ca8577,,,,,publisher:,'T.,"Egerton,",Whitehall',,,
68ea4037c29b425043ca8578,,,"},",,,,,,,,
68ea4037c29b425043ca8579,,,{,,,,,,,,
68ea4037c29b425043ca857a,,,,,title:,'The,Lord,of,the,"Rings',",
68ea4037c29b425043ca857b,,,,,author:,'J.R.R.,"Tolkien',",,,,
68ea4037c29b425043ca857c,,,,,genre:,"'Fantasy',",,,,,
68ea4037c29b425043ca857d,,,,,published_year:,"1954,",,,,,
68ea4037c29b425043ca857e,,,,,price:,"19.99,",,,,,
68ea4037c29b425043ca857f,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca8580,,,,,pages:,"1178,",,,,,
68ea4037c29b425043ca8581,,,,,publisher:,'Allen,&,Unwin',,,
68ea4037c29b425043ca8582,,,"},",,,,,,,,
68ea4037c29b425043ca8583,,,{,,,,,,,,
68ea4037c29b425043ca8584,,,,,title:,'Animal,"Farm',",,,,
68ea4037c29b425043ca8585,,,,,author:,'George,"Orwell',",,,,
68ea4037c29b425043ca8586,,,,,genre:,'Political,"Satire',",,,,
68ea4037c29b425043ca8587,,,,,published_year:,"1945,",,,,,
68ea4037c29b425043ca8588,,,,,price:,"8.50,",,,,,
68ea4037c29b425043ca8589,,,,,in_stock:,"false,",,,,,
68ea4037c29b425043ca858a,,,,,pages:,"112,",,,,,
68ea4037c29b425043ca858b,,,,,publisher:,'Secker,&,Warburg',,,
68ea4037c29b425043ca858c,,,"},",,,,,,,,
68ea4037c29b425043ca858d,,,{,,,,,,,,
68ea4037c29b425043ca858e,,,,,title:,'The,"Alchemist',",,,,
68ea4037c29b425043ca858f,,,,,author:,'Paulo,"Coelho',",,,,
68ea4037c29b425043ca8590,,,,,genre:,"'Fiction',",,,,,
68ea4037c29b425043ca8591,,,,,published_year:,"1988,",,,,,
68ea4037c29b425043ca8592,,,,,price:,"10.99,",,,,,
68ea4037c29b425043ca8593,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca8594,,,,,pages:,"197,",,,,,
68ea4037c29b425043ca8595,,,,,publisher:,'HarperOne',,,,,
68ea4037c29b425043ca8596,,,"},",,,,,,,,
68ea4037c29b425043ca8597,,,{,,,,,,,,
68ea4037c29b425043ca8598,,,,,title:,'Moby,"Dick',",,,,
68ea4037c29b425043ca8599,,,,,author:,'Herman,"Melville',",,,,
68ea4037c29b425043ca859a,,,,,genre:,"'Adventure',",,,,,
68ea4037c29b425043ca859b,,,,,published_year:,"1851,",,,,,
68ea4037c29b425043ca859c,,,,,price:,"12.50,",,,,,
68ea4037c29b425043ca859d,,,,,in_stock:,"false,",,,,,
68ea4037c29b425043ca859e,,,,,pages:,"635,",,,,,
68ea4037c29b425043ca859f,,,,,publisher:,'Harper,&,Brothers',,,
68ea4037c29b425043ca85a0,,,"},",,,,,,,,
68ea4037c29b425043ca85a1,,,{,,,,,,,,
68ea4037c29b425043ca85a2,,,,,title:,'Wuthering,"Heights',",,,,
68ea4037c29b425043ca85a3,,,,,author:,'Emily,"BrontÃ«',",,,,
68ea4037c29b425043ca85a4,,,,,genre:,'Gothic,"Fiction',",,,,
68ea4037c29b425043ca85a5,,,,,published_year:,"1847,",,,,,
68ea4037c29b425043ca85a6,,,,,price:,"9.99,",,,,,
68ea4037c29b425043ca85a7,,,,,in_stock:,"true,",,,,,
68ea4037c29b425043ca85a8,,,,,pages:,"342,",,,,,
68ea4037c29b425043ca85a9,,,,,publisher:,'Thomas,Cautley,Newby',,,
68ea4037c29b425043ca85aa,,,},,,,,,,,
68ea4037c29b425043ca85ab,];,,,,,,,,,,
68ea4037c29b425043ca85ac,,,,,,,,,,,
68ea4037c29b425043ca85ad,//,Function,to,insert,books,into,MongoDB,,,,
68ea4037c29b425043ca85ae,async,function,insertBooks(),{,,,,,,,
68ea4037c29b425043ca85af,,,const,client,=,new,MongoClient(uri);,,,,
68ea4037c29b425043ca85b0,,,,,,,,,,,
68ea4037c29b425043ca85b1,,,try,{,,,,,,,
68ea4037c29b425043ca85b2,,,,,//,Connect,to,the,MongoDB,server,
68ea4037c29b425043ca85b3,,,,,await,client.connect();,,,,,
68ea4037c29b425043ca85b4,,,,,console.log('Connected,to,MongoDB,server');,,,
68ea4037c29b425043ca85b5,,,,,,,,,,,
68ea4037c29b425043ca85b6,,,,,//,Get,database,and,collection,,
68ea4037c29b425043ca85b7,,,,,const,db,=,client.db(dbName);,,,
68ea4037c29b425043ca85b8,,,,,const,collection,=,db.collection(collectionName);,,,
68ea4037c29b425043ca85b9,,,,,,,,,,,
68ea4037c29b425043ca85ba,,,,,//,Check,if,collection,already,has,documents
68ea4037c29b425043ca85bb,,,,,const,count,=,await,collection.countDocuments();,,
68ea4037c29b425043ca85bc,,,,,if,(count,>,0),{,,
68ea4037c29b425043ca85bd,,,,,,,console.log(`Collection,already,contains,${count},documents.
68ea4037c29b425043ca85be,,,,,,,await,collection.drop();,,,
68ea4037c29b425043ca85bf,,,,,,,console.log('Collection,dropped,successfully');,,
68ea4037c29b425043ca85c0,,,,,},,,,,,
68ea4037c29b425043ca85c1,,,,,,,,,,,
68ea4037c29b425043ca85c2,,,,,//,Insert,the,books,,,
68ea4037c29b425043ca85c3,,,,,const,result,=,await,collection.insertMany(books);,,
68ea4037c29b425043ca85c4,,,,,console.log(`${result.insertedCount},books,were,successfully,inserted,into,the
68ea4037c29b425043ca85c5,,,,,,,,,,,
68ea4037c29b425043ca85c6,,,,,//,Display,the,inserted,books,,
68ea4037c29b425043ca85c7,,,,,console.log('\nInserted,books:');,,,,,
68ea4037c29b425043ca85c8,,,,,const,insertedBooks,=,await,collection.find({}).toArray();,,
68ea4037c29b425043ca85c9,,,,,"insertedBooks.forEach((book,",index),=>,{,,,
68ea4037c29b425043ca85ca,,,,,,,console.log(`${index,+,1}.,${book.title},by
68ea4037c29b425043ca85cb,,,,,});,,,,,,
68ea4037c29b425043ca85cc,,,,,,,,,,,
68ea4037c29b425043ca85cd,,,},catch,(err),{,,,,,
68ea4037c29b425043ca85ce,,,,,console.error('Error,"occurred:',",err);,,,,
68ea4037c29b425043ca85cf,,,},finally,{,,,,,,
68ea4037c29b425043ca85d0,,,,,//,Close,the,connection,,,
68ea4037c29b425043ca85d1,,,,,await,client.close();,,,,,
68ea4037c29b425043ca85d2,,,,,console.log('Connection,closed');,,,,,
68ea4037c29b425043ca85d3,,,},,,,,,,,
68ea4037c29b425043ca85d4,},,,,,,,,,,
68ea4037c29b425043ca85d5,,,,,,,,,,,
68ea4037c29b425043ca85d6,//,Run,the,function,,,,,,,
68ea4037c29b425043ca85d7,insertBooks().catch(console.error);,,,,,,,,,,
68ea4037c29b425043ca85d8,,,,,,,,,,,
68ea4037c29b425043ca85d9,/*,,,,,,,,,,
68ea4037c29b425043ca85da,,*,Example,MongoDB,queries,you,can,try,after,running,this
68ea4037c29b425043ca85db,,*,,,,,,,,,
68ea4037c29b425043ca85dc,,*,1,Find,all,books:,,,,,
68ea4037c29b425043ca85dd,,*,,,,db.books.find(),,,,,
68ea4037c29b425043ca85de,,*,,,,,,,,,
68ea4037c29b425043ca85df,,*,2,Find,books,by,a,specific,author:,,
68ea4037c29b425043ca85e0,,*,,,,db.books.find({,author:,George Orwell,}),,
68ea4037c29b425043ca85e1,,*,,,,,,,,,
68ea4037c29b425043ca85e2,,*,3,Find,books,published,after,1950:,,,
68ea4037c29b425043ca85e3,,*,,,,db.books.find({,published_year:,{,$gt:,1950,}
68ea4037c29b425043ca85e4,,*,,,,,,,,,
68ea4037c29b425043ca85e5,,*,4,Find,books,in,a,specific,genre:,,
68ea4037c29b425043ca85e6,,*,,,,db.books.find({,genre:,Fiction,}),,
68ea4037c29b425043ca85e7,,*,,,,,,,,,
68ea4037c29b425043ca85e8,,*,5,Find,in-stock,books:,,,,,
68ea4037c29b425043ca85e9,,*,,,,db.books.find({,in_stock:,true,}),,
68ea4037c29b425043ca85ea,,*/,,,,,,,,,
